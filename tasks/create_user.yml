---
- name: "Create Gitea Group"
  group:
    name: "{{ gitea_group }}"
    system: true
    state: "present"
    
# If the system sshd ist used, we must not use /bin/false. Instead use the normal /bin/sh to enable gitea to run its commands
- name: Switch shell when not using the builtin ssh server
  set_fact:
    gitea_shell: "/bin/sh"
  when: "not gitea_start_ssh"

- name: "Create Gitea user"
  user:
    name: "{{ gitea_user }}"
    comment: "Gitea user"
    home: "{{ gitea_home }}"
    shell: "{{ gitea_shell }}"
    system: true
